<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ball Clicking Game</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background-color: #f0f0f0;
        }

        /* Add styles for fullscreen */
        :fullscreen {
            background-color: #f0f0f0;
        }

        /* Webkit support */
        :-webkit-full-screen {
            background-color: #f0f0f0;
        }

        /* Mozilla support */
        :-moz-full-screen {
            background-color: #f0f0f0;
        }

        /* Microsoft support */
        :-ms-fullscreen {
            background-color: #f0f0f0;
        }

        .ball {
            position: absolute;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            font-family: Arial, sans-serif;
            font-size: 20px;
            color: white;
            text-shadow: 1px 1px 2px black;
            user-select: none;
        }

        #resetButton {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            z-index: 1000;
        }

        #fullscreenButton {
            position: fixed;
            top: 20px;
            right: 140px;  /* Position it to the left of reset button */
            padding: 10px 20px;
            background-color: #2196F3;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            z-index: 1000;
        }

        #resetButton:hover {
            background-color: #45a049;
        }

        #fullscreenButton:hover {
            background-color: #1976D2;
        }

        /* Show cursor only when moving */
        .ball:hover {
            cursor: pointer !important;
        }
        #resetButton:hover, #fullscreenButton:hover {
            cursor: pointer !important;
        }
    </style>
</head>
<body>
    <button id="resetButton">Reset Game</button>
    <button id="fullscreenButton">Full Screen</button>
    <script>
        const MAX_BALLS = 5;
        const BALL_SIZE = 60;
        let nextNumber = MAX_BALLS + 1;  // Track the next number to use
        let isFullScreen = false;
        
        function getRandomColor() {
            const letters = '0123456789ABCDEF';
            let color = '#';
            for (let i = 0; i < 6; i++) {
                color += letters[Math.floor(Math.random() * 16)];
            }
            return color;
        }

        function getRandomPosition() {
            const maxX = window.innerWidth - BALL_SIZE;
            const maxY = window.innerHeight - BALL_SIZE;
            return {
                x: Math.floor(Math.random() * maxX),
                y: Math.floor(Math.random() * maxY)
            };
        }

        function adjustBallPosition(ball) {
            const maxX = window.innerWidth - BALL_SIZE;
            const maxY = window.innerHeight - BALL_SIZE;
            
            // Get current position
            let x = parseInt(ball.style.left);
            let y = parseInt(ball.style.top);
            
            // Adjust if out of bounds
            x = Math.min(Math.max(0, x), maxX);
            y = Math.min(Math.max(0, y), maxY);
            
            // Update position
            ball.style.left = x + 'px';
            ball.style.top = y + 'px';
        }

        function handleResize() {
            const balls = document.querySelectorAll('.ball');
            balls.forEach(ball => adjustBallPosition(ball));
        }

        function createBall(number) {
            const ball = document.createElement('div');
            ball.className = 'ball';
            ball.textContent = number;
            ball.dataset.number = number;
            ball.style.backgroundColor = getRandomColor();
            const position = getRandomPosition();
            ball.style.left = position.x + 'px';
            ball.style.top = position.y + 'px';
            return ball;
        }

        function resetGame() {
            // Remove all existing balls
            const balls = document.querySelectorAll('.ball');
            balls.forEach(ball => ball.remove());
            
            // Reset the next number counter
            nextNumber = MAX_BALLS + 1;
            
            // Create new initial balls
            for (let i = 1; i <= MAX_BALLS; i++) {
                const ball = createBall(i);
                document.body.appendChild(ball);
            }
        }

        // Add fullscreen functions
        async function toggleFullScreen() {
            if (!isFullScreen) {
                const element = document.documentElement;
                try {
                    // Try the most aggressive full screen options
                    if (element.requestFullscreen) {
                        await element.requestFullscreen({
                            navigationUI: "hide",
                            requireUserActivation: false
                        });
                    } else if (element.webkitRequestFullscreen) {
                        // For Safari
                        element.webkitRequestFullscreen(Element.WEBKIT_REQUEST_FULLSCREEN_TYPE_KEYBOARD_INPUT_BLOCKED);
                    } else if (element.mozRequestFullScreen) {
                        // For Firefox
                        element.mozRequestFullScreen({ requireUserActivation: false });
                    } else if (element.msRequestFullscreen) {
                        element.msRequestFullscreen();
                    }
                } catch (err) {
                    console.warn('Fullscreen request failed:', err);
                }
            } else {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                } else if (document.webkitExitFullscreen) {
                    document.webkitExitFullscreen();
                } else if (document.mozCancelFullScreen) {
                    document.mozCancelFullScreen();
                } else if (document.msExitFullscreen) {
                    document.msExitFullscreen();
                }
            }
        }

        // Update fullscreen button text
        function updateFullscreenButtonText() {
            const fullscreenButton = document.getElementById('fullscreenButton');
            fullscreenButton.textContent = isFullScreen ? 'Exit Full Screen' : 'Full Screen';
        }

        // Add fullscreen change event listeners
        document.addEventListener('fullscreenchange', () => {
            isFullScreen = !!document.fullscreenElement;
            updateFullscreenButtonText();
        });

        document.addEventListener('webkitfullscreenchange', () => {
            isFullScreen = !!document.webkitFullscreenElement;
            updateFullscreenButtonText();
        });

        document.addEventListener('msfullscreenchange', () => {
            isFullScreen = !!document.msFullscreenElement;
            updateFullscreenButtonText();
        });

        function initializeGame() {
            // Create initial balls with sequential numbers 1 to MAX_BALLS
            for (let i = 1; i <= MAX_BALLS; i++) {
                const ball = createBall(i);
                document.body.appendChild(ball);
            }

            // Add reset button event listener
            document.getElementById('resetButton').addEventListener('click', resetGame);

            // Add fullscreen button event listener
            document.getElementById('fullscreenButton').addEventListener('click', toggleFullScreen);

            // Add click event listener to body for event delegation
            document.body.addEventListener('click', (e) => {
                if (e.target.classList.contains('ball')) {
                    const balls = document.querySelectorAll('.ball');
                    const numbers = Array.from(balls).map(ball => 
                        parseInt(ball.dataset.number));
                    const minNumber = Math.min(...numbers);

                    if (parseInt(e.target.dataset.number) === minNumber) {
                        // Remove clicked ball
                        e.target.remove();
                        // Create new ball with next sequential number
                        const newBall = createBall(nextNumber);
                        nextNumber++;  // Increment for next ball
                        document.body.appendChild(newBall);
                    }
                }
            });

            // Add window resize event listener
            window.addEventListener('resize', handleResize);
        }

        // Start the game when the page loads
        window.onload = initializeGame;
    </script>
</body>
</html>
